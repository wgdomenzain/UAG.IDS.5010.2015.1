/*
 * main implementation: use this 'C' sample to create your own application
 *
 */

#include "derivative.h" /* include peripheral declarations */
#define portB GPIOB_PDOR

void cfgPorts(void);
void delay(void);
void turnoff(void);

int main(void)
{
	cfgPorts();
	
	for(;;) {	   
		portB = 0xFFFBFFFF;
		delay();
		turnoff();
		GPIOB_PDOR &= 0xFFF7FFFF;
		delay();
		turnoff();
		GPIOD_PDOR = 0xFFFFFFFD;
		delay();
		turnoff();
	}
	
	return 0;
}
void cfgPorts(void){
	
	SIM_SCGC5 =  SIM_SCGC5_PORTB_MASK;
	SIM_SCGC5 |=  SIM_SCGC5_PORTA_MASK; 
	SIM_SCGC5 |=  SIM_SCGC5_PORTD_MASK;
	
	//Activate pin mode
	PORTB_PCR18 = PORT_PCR_MUX(1);
	PORTB_PCR19 = PORT_PCR_MUX(1);
	PORTD_PCR1  = PORT_PCR_MUX(1);
	
	//Configure PortB and PortD as output
	GPIOB_PDDR = 0xFFFFFFFF;
	GPIOB_PDDR = 0xFFFFFFFF;
	GPIOD_PDDR = 0xFFFFFFFF;
}
void delay() {
	int i;
	for (i = 0; i < 1000000; i++)
		asm("nop");
}
void turnoff(void) {
	GPIOB_PDOR = 0xFFFFFFFF; 
	GPIOD_PDOR = 0xFFFFFFFF; 
}

